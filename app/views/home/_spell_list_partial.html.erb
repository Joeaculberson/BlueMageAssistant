<div class="accordion-item">
  <h2 class="accordion-header" id="heading-<%= @i.to_s %>">
    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-<%= @i.to_s %>" aria-expanded="true" aria-controls="collapse-<%= @i.to_s %>">
      <% if @i != 1 %>
        <img style="border-radius: 50%;" src="<%= character_avatar %>" alt="Avatar">
      <% end %>
      <h4 style="padding-left: 50px">
        <%= table_caption %>
      </h4>
    </button>
  </h2>
  <div id="collapse-<%= @i.to_s %>" class="accordion-collapse collapse" aria-labelledby="heading-<%= @i.to_s %>" data-bs-parent="#spells-accordion">
    <div class="accordion-body">
      <table class="table table-dark table-striped">
        <thead class="table-dark">
        <th scope="col">#</th>
        <th scope="col"></th>
        <th scope="col">Spell</th>
        <th scope="col">Source(s)</th>
        </thead>
        <tbody>
          <% spell_ids.each do |id| %>
            <% @spell = @master_spell_book.spells.find { |h| h["id"] == id } %>
            <tr>
              <th scope="row">
                <%= @spell["order"] %>
              </th>
              <td>
                <img src="<%= @spell["icon"] %>" alt="<%= @spell["name"] %>">
              </td>
              <td>
                <%= @spell["name"] %>
              </td>
              <td>
                <ul>
                  <% @spell["sources"].each do |source| %>
                    <li>
                      <%= source["text"] %>
                    </li>
                  <% end %>
                </ul>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>
<% @i += 1 %>